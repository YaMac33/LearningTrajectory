<!DOCTYPE html>
<html lang="ja">
<head>
  <!-- Google tag (fixed) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-MQ9ZB4LYWP"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- GEN: METAï¼ˆç”Ÿæˆæ™‚ã«ç½®æ›ï¼‰ -->
  <title>Learning Trajectory | WAFã®é©ç”¨å¯èƒ½ã‚µãƒ¼ãƒ“ã‚¹</title>
  <meta name="description" content="AWS WAFãŒé©ç”¨ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¨ã§ããªã„ã‚µãƒ¼ãƒ“ã‚¹ã®é•ã„ã‚’è§£èª¬ã€‚L7ï¼ˆHTTPå±¤ï¼‰ã¨L4ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å±¤ï¼‰ã®é•ã„ã‚„ã€EC2ã«ç›´æ¥é©ç”¨ã§ããªã„ç†ç”±ã‚’å›³è§£ã§æ•´ç†ã—ã¾ã™ã€‚" />
  <meta name="robots" content="index,follow" />

  <!-- Optional: OGPï¼ˆä¸è¦ãªã‚‰ç©ºã§OKï¼‰ -->
  <meta property="og:type" content="article" />
  <meta property="og:title" content="WAFã®é©ç”¨å¯èƒ½ã‚µãƒ¼ãƒ“ã‚¹" />
  <meta property="og:description" content="AWS WAFãŒé©ç”¨ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã¨ã§ããªã„ã‚µãƒ¼ãƒ“ã‚¹ã®é•ã„ã‚’è§£èª¬ã€‚L7ï¼ˆHTTPå±¤ï¼‰ã¨L4ï¼ˆãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯å±¤ï¼‰ã®é•ã„ã‚„ã€EC2ã«ç›´æ¥é©ç”¨ã§ããªã„ç†ç”±ã‚’å›³è§£ã§æ•´ç†ã—ã¾ã™ã€‚" />
  

  <!-- Assets (article path: docs/<category>/posts/.../index.html) -->
  <link rel="stylesheet" href="../../../assets/styles.css" />

  <!-- å›³è§£ç”¨è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ« -->
  <style>
    .diagram-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      margin: 30px 0;
      padding: 24px;
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 12px;
      overflow-x: auto;
    }
    .diagram-title {
      font-weight: bold;
      text-align: center;
      margin-bottom: 10px;
      color: #475569;
      font-size: 0.9em;
    }
    
    /* é©ç”¨å¯å¦ã®ä»•åˆ†ã‘ */
    .target-sort {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }
    @media (max-width: 600px) {
      .target-sort { grid-template-columns: 1fr; }
    }
    .target-box {
      border: 2px solid;
      border-radius: 8px;
      padding: 15px;
      background: #fff;
      text-align: center;
    }
    .box-ok { border-color: #10b981; background: #ecfdf5; }
    .box-ng { border-color: #ef4444; background: #fef2f2; }
    
    .target-title {
      font-weight: 800;
      font-size: 1.1em;
      margin-bottom: 10px;
      display: block;
      border-bottom: 1px dashed;
      padding-bottom: 5px;
    }
    .box-ok .target-title { color: #047857; border-color: #10b981; }
    .box-ng .target-title { color: #991b1b; border-color: #ef4444; }
    
    .target-list {
      list-style: none;
      padding: 0;
      margin: 0;
      text-align: left;
    }
    .target-item {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 8px;
      font-weight: bold;
      font-size: 0.9em;
      color: #334155;
    }
    .icon-ok { color: #10b981; }
    .icon-ng { color: #ef4444; }

    /* WAFã®é…ç½®å›³ */
    .waf-architecture {
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 10px;
      padding: 20px;
      position: relative;
    }
    .waf-shield {
      width: 100%;
      max-width: 400px;
      height: 40px;
      background: #f59e0b;
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: #fff;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(245, 158, 11, 0.3);
      position: relative;
      z-index: 2;
    }
    .waf-shield::before { content: "ğŸ›¡ï¸ AWS WAF (æ¤œå•æ‰€)"; }
    
    .entry-points {
      display: flex;
      justify-content: center;
      gap: 15px;
      width: 100%;
      flex-wrap: wrap;
    }
    .entry-box {
      border: 2px solid #3b82f6;
      background: #eff6ff;
      color: #1d4ed8;
      padding: 10px;
      border-radius: 6px;
      font-weight: bold;
      font-size: 0.85em;
      text-align: center;
      min-width: 100px;
    }
    
    .backend-layer {
      margin-top: 20px;
      border: 2px dashed #64748b;
      padding: 15px;
      border-radius: 8px;
      background: #f1f5f9;
      width: 100%;
      max-width: 300px;
      text-align: center;
      color: #475569;
      position: relative;
    }
    .backend-layer::before {
      content: "ç›´æ¥WAFã¯ä»˜ã‘ã‚‰ã‚Œãªã„";
      position: absolute;
      top: -12px;
      left: 50%;
      transform: translateX(-50%);
      background: #f1f5f9;
      padding: 0 8px;
      font-size: 0.75em;
      font-weight: bold;
    }
    
    .arrow-down { font-size: 1.5em; color: #94a3b8; line-height: 0.8; }

    /* OSIãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚¤ãƒ¡ãƒ¼ã‚¸ */
    .layer-check {
      display: flex;
      justify-content: center;
      gap: 20px;
      align-items: center;
    }
    .layer-card {
      border: 1px solid #cbd5e1;
      padding: 15px;
      border-radius: 8px;
      text-align: center;
      width: 140px;
      background: #fff;
    }
    .l7-card { border-top: 4px solid #10b981; }
    .l4-card { border-top: 4px solid #ef4444; }
    
    .layer-num { font-size: 1.5em; font-weight: 800; display: block; margin-bottom: 5px; }
    .layer-text { font-size: 0.8em; color: #475569; }

    .comparison-table {
      width: 100%;
      border-collapse: collapse;
      margin: 20px 0;
      font-size: 0.95em;
    }
    .comparison-table th, .comparison-table td {
      border: 1px solid #e5e7eb;
      padding: 10px 12px;
      text-align: left;
    }
    .comparison-table th {
      background: #f3f4f6;
      font-weight: bold;
    }
    .mark-ok { color: #10b981; font-weight: bold; }
    .mark-ng { color: #ef4444; font-weight: bold; }
  </style>
</head>

<body>
  <div class="container">

    <header class="site-header">
      <a href="../../../index.html" class="site-title">Learning Trajectory</a>
    </header>

    <!-- å›ºå®šï¼šå‰å¾ŒãƒŠãƒ“ï¼ˆJSåˆ¶å¾¡ï¼‰ -->
    <nav class="post-nav">
      <a id="prevPost" class="post-nav__link" href="#" style="display:none;">â† å‰ã®è¨˜äº‹</a>
      <a id="nextPost" class="post-nav__link" href="#" style="display:none;">æ¬¡ã®è¨˜äº‹ â†’</a>
    </nav>

    <main>
      <article class="article-content">

        <header class="article-header">
          <!-- GEN: POST META -->
          <time class="post-meta" datetime="2026-02-15">
            2026.02.15
          </time>

          <!-- GEN: TITLE -->
          <h1 class="article-title">WAFã®é©ç”¨å¯èƒ½ã‚µãƒ¼ãƒ“ã‚¹</h1>

          <!-- GEN: TAGS -->
          <div class="tags">
            <span class="tag">#AWS</span>
            <span class="tag">#WAF</span>
            <span class="tag">#ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£</span>
            <span class="tag">#ALB</span>
            <span class="tag">#API Gateway</span>
            <span class="tag">#CloudFront</span>
          </div>
        </header>

        <!-- GEN: BODY -->
        <p>AWS WAFã¯HTTP/HTTPSã‚’æ‰±ã†ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆL7ï¼‰ã«ã®ã¿é©ç”¨å¯èƒ½ã§ã™ã€‚EC2ã‚„NLBã«ã¯ç›´æ¥é©ç”¨ã§ãã¾ã›ã‚“ã€‚</p>
<hr>
<p>
  <strong>Q. ã€ŒWAFã¯ALBã‚„API Gatewayã«ã¯é©ç”¨ã§ãã‚‹ã‘ã©ã€EC2ã‚„NLBã«ã¯é©ç”¨ã§ããªã„ã€ã¨ã„ã†ç†è§£ã§åˆã£ã¦ã„ã¾ã™ã‹ï¼Ÿ</strong><br>
  <strong>A. ã¯ã„ã€ãã®ç†è§£ã§æ­£è§£ã§ã™ï¼</strong>
</p>
<p>
  AWS WAFï¼ˆWeb Application Firewallï¼‰ã¯ã€<strong>ã€ŒHTTP/HTTPSï¼ˆWebã®è¨€è‘‰ï¼‰ã‚’ç†è§£ã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹ã€</strong>ã«ã—ã‹å–ã‚Šä»˜ã‘ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚<br>
  ã“ã‚Œã‚’å°‚é–€ç”¨èªã§è¨€ã†ã¨<strong>ã€Œãƒ¬ã‚¤ãƒ¤ãƒ¼7ï¼ˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤ï¼‰ã®ã‚µãƒ¼ãƒ“ã‚¹ã«ã®ã¿é©ç”¨å¯èƒ½ã€</strong>ã¨ãªã‚Šã¾ã™ã€‚
</p>

<h2>1. é©ç”¨ã§ãã‚‹ã‚‚ã®ãƒ»ã§ããªã„ã‚‚ã®</h2>
<p>
  è©¦é¨“ã§ã¯ã€Œã“ã‚Œã«WAFã¯ä»˜ã‘ã‚‰ã‚Œã‚‹ã‹ï¼Ÿã€ã¨ã„ã†â—‹Ã—å•é¡ŒãŒã‚ˆãå‡ºã¾ã™ã€‚
</p>

<!-- å›³è§£ï¼šé©ç”¨å¯å¦ä»•åˆ†ã‘ -->
<div class="diagram-container">
  <div class="diagram-title">WAFã‚’ã‚¢ã‚¿ãƒƒãƒã§ãã‚‹ã‚µãƒ¼ãƒ“ã‚¹</div>
  <div class="target-sort">
    
    <!-- OK -->
    <div class="target-box box-ok">
      <span class="target-title">â­• é©ç”¨å¯èƒ½ (L7)</span>
      <ul class="target-list">
        <li class="target-item"><span class="icon-ok">âœ”</span> ALB (Load Balancer)</li>
        <li class="target-item"><span class="icon-ok">âœ”</span> API Gateway</li>
        <li class="target-item"><span class="icon-ok">âœ”</span> AppSync (GraphQL)</li>
        <li class="target-item"><span class="icon-ok">âœ”</span> CloudFront (CDN)</li>
      </ul>
      <p style="font-size:0.8em; margin-top:10px; color:#047857;">
        HTTPã®ä¸­èº«ï¼ˆURLã‚„ãƒ˜ãƒƒãƒ€ãƒ¼ï¼‰ã‚’è¦‹ã¦åˆ¤æ–­ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ãŸã¡ã€‚
      </p>
    </div>

    <!-- NG -->
    <div class="target-box box-ng">
      <span class="target-title">âŒ é©ç”¨ä¸å¯ (L4ä»¥ä¸‹)</span>
      <ul class="target-list">
        <li class="target-item"><span class="icon-ng">âœ–</span> EC2 ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹</li>
        <li class="target-item"><span class="icon-ng">âœ–</span> NLB (Network LB)</li>
        <li class="target-item"><span class="icon-ng">âœ–</span> Route 53 (DNS)</li>
        <li class="target-item"><span class="icon-ng">âœ–</span> RDS / DynamoDB</li>
      </ul>
      <p style="font-size:0.8em; margin-top:10px; color:#991b1b;">
        HTTPã‚’è§£é‡ˆã—ãªã„ã€ã¾ãŸã¯ã‚µãƒ¼ãƒãƒ¼ãã®ã‚‚ã®ã€‚
      </p>
    </div>

  </div>
</div>

<h2>2. WAFã®é…ç½®ã‚¤ãƒ¡ãƒ¼ã‚¸ï¼ˆæ¤œå•æ‰€ï¼‰</h2>
<p>
  WAFã¯ã€Webã‚¢ãƒ—ãƒªã¸ã®<strong>ã€Œå…¥ã‚Šå£ï¼ˆç„é–¢ï¼‰ã€</strong>ã«è¨­ç½®ã™ã‚‹æ¤œå•æ‰€ã§ã™ã€‚
</p>

<!-- å›³è§£ï¼šWAFã®é…ç½® -->
<div class="diagram-container">
  <div class="diagram-title">ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ä¸Šã®ä½ç½®</div>
  <div class="waf-architecture">
    
    <div style="font-weight:bold; color:#64748b;">ğŸ‘¤ ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ</div>
    <div class="arrow-down">â¬‡ HTTP</div>

    <!-- æ¤œå•æ‰€ -->
    <div class="waf-shield"></div>
    <div class="arrow-down">â¬‡ è¨±å¯</div>

    <!-- é©ç”¨å…ˆ -->
    <div class="entry-points">
      <div class="entry-box">CloudFront</div>
      <div class="entry-box">ALB</div>
      <div class="entry-box">API Gateway</div>
    </div>

    <div class="arrow-down">â¬‡ è»¢é€</div>

    <!-- ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ -->
    <div class="backend-layer">
      <strong>ğŸ’» EC2 / Lambda</strong><br>
      <span style="font-size:0.8em;">(ã‚¢ãƒ—ãƒªæœ¬ä½“)</span>
    </div>

  </div>
</div>

<h3>ãªãœ EC2 ã«ç›´æ¥ä»˜ã‘ã‚‰ã‚Œãªã„ï¼Ÿ</h3>
<p>
  EC2ã¯ã€Œã‚µãƒ¼ãƒãƒ¼ãã®ã‚‚ã®ã€ã§ã™ã€‚WAFã¯ã€Œãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’ä¸­ç¶™ãƒ»æ¤œæŸ»ã™ã‚‹ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã€ãªã®ã§ã€EC2ã®ä¸­ã«ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚<br>
  EC2ã‚’å®ˆã‚ŠãŸã‘ã‚Œã°ã€<strong>æ‰‹å‰ã«ALBï¼ˆãƒ­ãƒ¼ãƒ‰ãƒãƒ©ãƒ³ã‚µãƒ¼ï¼‰ã‚’ç½®ã„ã¦ã€ãã®ALBã«WAFã‚’ä»˜ã‘ã‚‹</strong>ã®ãŒé‰„å‰‡ã§ã™ã€‚
</p>

<h3>ãªãœ NLB ã«ä»˜ã‘ã‚‰ã‚Œãªã„ï¼Ÿ</h3>
<p>
  NLBã¯ã€Œãƒ‘ã‚±ãƒƒãƒˆï¼ˆL4ï¼‰ã€ã‚’é«˜é€Ÿã«æµã™åœŸç®¡ã§ã™ã€‚HTTPã®ä¸­èº«ï¼ˆURLã«ã€Œadminã€ãŒå«ã¾ã‚Œã¦ã„ã‚‹ã‹ç­‰ï¼‰ã‚’è¦‹ã‚‹ã“ã¨ãŒã§ãã¾ã›ã‚“ã€‚<br>
  ä¸­èº«ãŒè¦‹ãˆãªã„ã®ã§ã€WAFã®ãƒ«ãƒ¼ãƒ«ã‚’é©ç”¨ã™ã‚‹ä½™åœ°ãŒãªã„ã®ã§ã™ã€‚
</p>

<h2>3. ãƒ¬ã‚¤ãƒ¤ãƒ¼ã§ç†è§£ã™ã‚‹æœ¬è³ª</h2>
<p>
  OSIå‚ç…§ãƒ¢ãƒ‡ãƒ«ã§è¦‹ã‚‹ã¨ä¸€ç™ºã§åˆ†ã‹ã‚Šã¾ã™ã€‚
</p>

<!-- å›³è§£ï¼šãƒ¬ã‚¤ãƒ¤ãƒ¼æ¯”è¼ƒ -->
<div class="diagram-container">
  <div class="diagram-title">æ¤œæŸ»å¯¾è±¡ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼</div>
  <div class="layer-check">
    
    <div class="layer-card l7-card">
      <span class="layer-num" style="color:#10b981;">L7</span>
      <span class="layer-text">
        <strong>ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å±¤</strong><br>
        HTTP/HTTPS<br>
        (WAFã®å®ˆå‚™ç¯„å›²)
      </span>
    </div>

    <div style="font-size:2em; color:#94a3b8;">â‰ </div>

    <div class="layer-card l4-card">
      <span class="layer-num" style="color:#ef4444;">L4</span>
      <span class="layer-text">
        <strong>ãƒˆãƒ©ãƒ³ã‚¹ãƒãƒ¼ãƒˆå±¤</strong><br>
        TCP/UDP<br>
        (NLBã®å®ˆå‚™ç¯„å›²)
      </span>
    </div>

  </div>
</div>

<h2>ã¾ã¨ã‚</h2>

<table class="comparison-table">
  <thead>
    <tr>
      <th>ã‚µãƒ¼ãƒ“ã‚¹</th>
      <th>WAFé©ç”¨</th>
      <th>ç†ç”±</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>ALB</strong></td>
      <td><span class="mark-ok">â— å¯èƒ½</span></td>
      <td>HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å‡¦ç†ã™ã‚‹ã‹ã‚‰ã€‚</td>
    </tr>
    <tr>
      <td><strong>API Gateway</strong></td>
      <td><span class="mark-ok">â— å¯èƒ½</span></td>
      <td>REST APIï¼ˆHTTPï¼‰ã®å…¥å£ã ã‹ã‚‰ã€‚</td>
    </tr>
    <tr>
      <td><strong>CloudFront</strong></td>
      <td><span class="mark-ok">â— å¯èƒ½</span></td>
      <td>ã‚¨ãƒƒã‚¸ã§HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å—ã‘ã‚‹ã‹ã‚‰ã€‚</td>
    </tr>
    <tr>
      <td><strong>EC2</strong></td>
      <td><span class="mark-ng">Ã— ä¸å¯</span></td>
      <td>ã‚µãƒ¼ãƒãƒ¼æœ¬ä½“ã€‚æ‰‹å‰ã«ALBãŒå¿…è¦ã€‚</td>
    </tr>
    <tr>
      <td><strong>NLB</strong></td>
      <td><span class="mark-ng">Ã— ä¸å¯</span></td>
      <td>L4ï¼ˆTCP/UDPï¼‰ã§å‹•ä½œã™ã‚‹ã‹ã‚‰ã€‚</td>
    </tr>
  </tbody>
</table>

<p>
  <strong>ã€ŒWAFã¯HTTPã®æ¤œå•æ‰€ã€‚HTTPã‚’è©±ã›ã‚‹å…¥å£ï¼ˆALB, API Gateway, CloudFront, AppSyncï¼‰ã«ã—ã‹ç½®ã‘ãªã„ã€</strong>ã¨è¦šãˆã¦ãŠã‘ã°å®Œç’§ã§ã™ï¼
</p>

        <!-- å•ã„åˆã‚ã›ï¼ˆå›ºå®šãƒ»ä¿®æ­£ç‰ˆï¼‰ -->
        <p class="article-contact">
          <a id="contactLink" href="#" target="_blank">âœ‰ ãŠå•ã„åˆã‚ã›</a>
        </p>

        <!-- GEN: REFERENCESï¼ˆä¸è¦ãªã‚‰ç©ºï¼‰ -->
        

      </article>
    </main>

    <footer class="site-footer">
      <p>&copy; <span id="year"></span> Learning Trajectory. All rights reserved.</p>
    </footer>

  </div>

  <!-- è¨˜äº‹ç”¨JSï¼ˆå‰å¾Œãƒªãƒ³ã‚¯ãƒ»å•ã„åˆã‚ã›URLï¼‰ -->
  <script src="../../../assets/post.js"></script>

  <!-- å…±é€šï¼šå¹´è¡¨ç¤º -->
  <script>
    const y = document.getElementById("year");
    if (y) y.textContent = new Date().getFullYear();
  </script>
</body>
</html>